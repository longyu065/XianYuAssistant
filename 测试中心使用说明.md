# 闲鱼助手测试中心使用说明

## 📋 概述

测试中心提供了一个统一的Web界面，用于测试和管理闲鱼助手的各项功能。

## 🚀 快速开始

### 方式1：通过浏览器访问

1. 启动应用
2. 打开浏览器访问：`http://localhost:8080/index.html`
3. 从左侧导航栏选择功能

### 方式2：通过测试脚本

运行 `测试商品API.bat`，选择选项4打开测试导航页面

## 🎯 功能模块

### 1. 账号管理

#### 📱 扫码登录
- **功能**：通过扫描二维码获取闲鱼账号Cookie
- **使用步骤**：
  1. 点击左侧导航"扫码登录"
  2. 点击"生成登录二维码"按钮
  3. 使用闲鱼APP扫描二维码
  4. 确认登录后，系统自动保存Cookie

- **Cookie ID说明**：
  - Cookie ID是账号的唯一标识符
  - 可以自定义，如：`default`、`account1`、`shop_main`
  - 用于区分和管理多个账号

### 2. 商品管理

#### 📦 商品管理
- **功能**：查看和管理闲鱼账号的商品信息
- **使用步骤**：
  1. 点击左侧导航"商品管理"
  2. 输入Cookie ID（账号标识）
  3. 选择操作：
     - **获取指定页商品**：获取单页商品列表
     - **获取所有商品**：自动分页获取全部商品
     - **从数据库获取**：查询已保存的商品

- **参数说明**：
  - **Cookie ID**：账号标识符（必填）
  - **页码**：要获取的页码，默认1
  - **每页数量**：每页显示的商品数，默认20
  - **最大页数**：获取全部商品时的页数限制（可选）

## 🎨 界面说明

### 左侧导航栏

```
┌─────────────────────┐
│  🛍️ 闲鱼助手        │
│  API测试中心         │
├─────────────────────┤
│  账号管理            │
│  📱 扫码登录         │
├─────────────────────┤
│  商品管理            │
│  📦 商品管理         │
├─────────────────────┤
│  关于                │
│  ℹ️ 关于系统         │
└─────────────────────┘
```

### 右侧内容区

- **顶部标题栏**：显示当前功能名称和Cookie ID说明
- **主体内容区**：显示功能页面（iframe嵌入）

## 📝 Cookie ID 详解

### 什么是Cookie ID？

Cookie ID是系统中用于标识不同闲鱼账号的唯一标识符。

### 命名建议

- ✅ `default` - 默认账号
- ✅ `account1`, `account2` - 按序号命名
- ✅ `shop_main` - 主店铺
- ✅ `test_001` - 测试账号
- ❌ 避免使用特殊符号

### 使用场景

1. **扫码登录时**：指定Cookie ID保存账号信息
2. **商品管理时**：通过Cookie ID查询对应账号的商品
3. **多账号管理**：使用不同的Cookie ID管理多个账号

详细说明请查看：[Cookie ID说明.md](Cookie ID说明.md)

## 🔧 功能详解

### 扫码登录流程

```
1. 用户点击"生成登录二维码"
   ↓
2. 系统调用API生成二维码
   ↓
3. 用户使用闲鱼APP扫码
   ↓
4. 系统轮询检查登录状态
   ↓
5. 登录成功后保存Cookie
   ↓
6. 显示成功提示
```

### 商品获取流程

```
1. 用户输入Cookie ID
   ↓
2. 系统从数据库查询Cookie
   ↓
3. 生成签名和时间戳
   ↓
4. 调用闲鱼API
   ↓
5. 解析商品数据
   ↓
6. 显示商品列表
```

## 📊 数据展示

### 商品卡片信息

每个商品卡片显示：
- 商品图片
- 商品标题
- 价格
- 商品ID
- 分类
- 状态

### 统计信息

顶部显示：
- 商品总数
- 页数
- 已保存数量

## ⚙️ 配置说明

### 默认配置

```javascript
// API基础地址
const API_BASE = '/api/items';

// 默认Cookie ID
const DEFAULT_COOKIE_ID = 'default';

// 默认分页参数
const DEFAULT_PAGE_SIZE = 20;
const DEFAULT_PAGE_NUMBER = 1;
```

### 修改配置

如需修改配置，可以在各个HTML文件的JavaScript部分进行调整。

## 🐛 常见问题

### Q1: 页面显示空白？
**A**: 检查应用是否正常启动，访问 `http://localhost:8080/index.html`

### Q2: 扫码后没有反应？
**A**: 
1. 检查网络连接
2. 确认闲鱼APP版本是否最新
3. 查看浏览器控制台是否有错误

### Q3: 获取商品失败？
**A**:
1. 确认Cookie ID是否正确
2. 检查Cookie是否过期
3. 查看后端日志排查问题

### Q4: Cookie ID找不到？
**A**: 
1. 先进行扫码登录保存Cookie
2. 或查询数据库中的Cookie ID列表

### Q5: 如何管理多个账号？
**A**:
1. 使用不同的Cookie ID进行扫码登录
2. 在商品管理时选择对应的Cookie ID

## 🔐 安全提示

⚠️ **重要提示**：

1. **Cookie安全**：
   - Cookie包含账号登录凭证，请妥善保管
   - 不要将Cookie信息泄露给他人
   - 定期更新Cookie

2. **测试环境**：
   - 本系统仅供测试使用
   - 不要在生产环境使用测试Cookie
   - 测试完成后及时清理数据

3. **访问控制**：
   - 建议只在本地网络访问
   - 不要将测试页面暴露到公网
   - 使用完毕后关闭浏览器

## 📚 相关文档

- [Cookie ID说明.md](Cookie ID说明.md) - Cookie ID详细说明
- [闲鱼扫码登录使用说明.md](闲鱼扫码登录使用说明.md) - 扫码登录详细说明
- [商品API使用说明.md](商品API使用说明.md) - 商品API详细说明
- [API测试示例.md](API测试示例.md) - API测试示例
- [代码规范遵循说明.md](代码规范遵循说明.md) - 代码规范说明

## 🎯 快速测试流程

### 完整测试流程

1. **启动应用**
   ```bash
   # 启动Spring Boot应用
   mvn spring-boot:run
   ```

2. **打开测试中心**
   - 访问：`http://localhost:8080/index.html`

3. **扫码登录**
   - 点击"扫码登录"
   - 生成二维码
   - 使用闲鱼APP扫码
   - 保存Cookie（Cookie ID: default）

4. **测试商品管理**
   - 点击"商品管理"
   - 输入Cookie ID: `default`
   - 点击"获取指定页商品"
   - 查看商品列表

5. **测试自动分页**
   - 输入Cookie ID: `default`
   - 设置最大页数: `3`
   - 点击"获取所有商品"
   - 查看所有商品

## 💡 使用技巧

1. **快速切换功能**：点击左侧导航栏快速切换不同功能
2. **保持Cookie ID一致**：在不同功能中使用相同的Cookie ID
3. **查看详细日志**：打开浏览器开发者工具查看网络请求
4. **批量测试**：使用测试脚本进行批量API测试

## 🔄 更新日志

- 2024-11-12: 创建统一测试导航页面
- 2024-11-12: 集成扫码登录和商品管理功能
- 2024-11-12: 添加Cookie ID说明和使用指南

## 📞 技术支持

如有问题或建议，请查看相关文档或联系开发团队。
