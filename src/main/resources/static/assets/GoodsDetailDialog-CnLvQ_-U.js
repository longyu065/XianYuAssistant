import{b as O}from"./goods-DUkgtAex.js";import{a as M}from"./index-B9A6kdhu.js";import{d as S,r as v,k as z,i as h,f as w,g as d,w as E,b as F,c as n,l as u,h as e,F as R,p as $,t as l,e as m,j,o,q,_ as J}from"./index-udmZ-1w9.js";const L={class:"goods-detail"},W={key:0,class:"detail-content"},H={class:"detail-left"},K={class:"main-image"},Q={key:0,class:"thumbnails"},U=["onClick"],X={class:"detail-right"},Y={class:"title-section"},Z={class:"goods-title"},ee={class:"goods-id"},te={class:"price-section"},se={class:"price"},ae={key:0,class:"description"},oe={class:"description-content"},ie={class:"config-section"},le={class:"config-item"},ne={class:"switch-container"},ce={class:"switch-status"},de={class:"config-item"},ue={class:"switch-container"},re={class:"switch-status"},ve={class:"time-info"},me={key:0,class:"time-item"},_e={class:"time-value"},pe={key:1,class:"time-item"},ge={class:"time-value"},he=S({__name:"GoodsDetailDialog",props:{modelValue:{type:Boolean},goodsId:{},accountId:{}},emits:["update:modelValue","refresh"],setup(f,{emit:k}){const _=f,x=k,p=v(!1),t=v(null),c=v(0),i=v([]),D=async()=>{if(_.goodsId){p.value=!0;try{const s=await O(_.goodsId);if(s.code===0||s.code===200){if(t.value=s.data?.itemWithConfig||null,t.value?.item.infoPic)try{const a=JSON.parse(t.value.item.infoPic);i.value=a.map(r=>r.url)}catch(a){console.error("解析图片列表失败:",a),i.value=[]}i.value.length===0&&t.value?.item.coverPic&&(i.value=[t.value.item.coverPic]),c.value=0}else throw new Error(s.msg||"获取商品详情失败")}catch(s){M("加载商品详情失败: "+s.message)}finally{p.value=!1}}},I=s=>({0:"success",1:"info",2:"warning"})[s]||"info",b=s=>({0:"在售",1:"已下架",2:"已售出"})[s]||"未知",C=s=>s?`¥${s}`:"-",V=s=>{c.value=s},P=()=>{x("update:modelValue",!1),t.value=null,i.value=[]};return z(()=>_.modelValue,s=>{s&&D()}),(s,a)=>{const r=d("el-image"),T=d("el-empty"),A=d("el-tag"),y=d("el-switch"),B=d("el-dialog"),G=F("loading");return o(),h(B,{"model-value":f.modelValue,title:"商品详情",width:"750px",onClose:P},{default:w(()=>[E((o(),n("div",L,[t.value?(o(),n("div",W,[e("div",H,[e("div",K,[i.value.length>0?(o(),h(r,{key:0,src:i.value[c.value],fit:"contain","preview-src-list":i.value,"initial-index":c.value},null,8,["src","preview-src-list","initial-index"])):(o(),h(T,{key:1,description:"暂无图片","image-size":100}))]),i.value.length>1?(o(),n("div",Q,[(o(!0),n(R,null,$(i.value,(N,g)=>(o(),n("div",{key:g,class:q(["thumbnail",{active:c.value===g}]),onClick:fe=>V(g)},[m(r,{src:N,fit:"cover"},null,8,["src"])],10,U))),128))])):u("",!0)]),e("div",X,[e("div",Y,[e("h3",Z,l(t.value.item.title),1),e("div",ee,"ID: "+l(t.value.item.xyGoodId),1)]),e("div",te,[e("span",se,l(C(t.value.item.soldPrice)),1),m(A,{type:I(t.value.item.status),size:"large"},{default:w(()=>[j(l(b(t.value.item.status)),1)]),_:1},8,["type"])]),t.value.item.detailInfo?(o(),n("div",ae,[a[0]||(a[0]=e("div",{class:"description-title"},"商品描述",-1)),e("div",oe,l(t.value.item.detailInfo),1)])):u("",!0),e("div",ie,[e("div",le,[a[1]||(a[1]=e("span",{class:"config-label"},"自动发货",-1)),e("div",ne,[m(y,{"model-value":t.value.xianyuAutoDeliveryOn===1,disabled:""},null,8,["model-value"]),e("span",ce,l(t.value.xianyuAutoDeliveryOn===1?"已开启":"已关闭"),1)])]),e("div",de,[a[2]||(a[2]=e("span",{class:"config-label"},"自动回复",-1)),e("div",ue,[m(y,{"model-value":t.value.xianyuAutoReplyOn===1,disabled:""},null,8,["model-value"]),e("span",re,l(t.value.xianyuAutoReplyOn===1?"已开启":"已关闭"),1)])])]),e("div",ve,[t.value.item.createdTime?(o(),n("div",me,[a[3]||(a[3]=e("span",{class:"time-label"},"创建时间：",-1)),e("span",_e,l(t.value.item.createdTime),1)])):u("",!0),t.value.item.updatedTime?(o(),n("div",pe,[a[4]||(a[4]=e("span",{class:"time-label"},"更新时间：",-1)),e("span",ge,l(t.value.item.updatedTime),1)])):u("",!0)])])])):u("",!0)])),[[G,p.value]])]),_:1},8,["model-value"])}}}),xe=J(he,[["__scopeId","data-v-6e3138d3"]]);export{xe as G};
