import{b as O}from"./goods-Bzsuu9Qq.js";import{d as M,r as v,q as S,f as h,g as w,h as d,w as z,e as E,c as n,s as u,i as e,F,j as R,t as l,b as m,m as $,o,n as j,_ as q}from"./index-7CieyMQU.js";const J={class:"goods-detail"},L={key:0,class:"detail-content"},W={class:"detail-left"},H={class:"main-image"},K={key:0,class:"thumbnails"},Q=["onClick"],U={class:"detail-right"},X={class:"title-section"},Y={class:"goods-title"},Z={class:"goods-id"},ee={class:"price-section"},te={class:"price"},se={key:0,class:"description"},ae={class:"description-content"},oe={class:"config-section"},ie={class:"config-item"},le={class:"switch-container"},ne={class:"switch-status"},ce={class:"config-item"},de={class:"switch-container"},ue={class:"switch-status"},re={class:"time-info"},ve={key:0,class:"time-item"},me={class:"time-value"},_e={key:1,class:"time-item"},pe={class:"time-value"},ge=M({__name:"GoodsDetailDialog",props:{modelValue:{type:Boolean},goodsId:{},accountId:{}},emits:["update:modelValue","refresh"],setup(f,{emit:k}){const _=f,x=k,p=v(!1),t=v(null),c=v(0),i=v([]),D=async()=>{if(_.goodsId){p.value=!0;try{const s=await O(_.goodsId);if(s.code===0||s.code===200){if(t.value=s.data?.itemWithConfig||null,t.value?.item.infoPic)try{const a=JSON.parse(t.value.item.infoPic);i.value=a.map(r=>r.url)}catch(a){console.error("解析图片列表失败:",a),i.value=[]}i.value.length===0&&t.value?.item.coverPic&&(i.value=[t.value.item.coverPic]),c.value=0}else throw new Error(s.msg||"获取商品详情失败")}catch(s){console.error("加载商品详情失败:",s)}finally{p.value=!1}}},I=s=>({0:"success",1:"info",2:"warning"})[s]||"info",b=s=>({0:"在售",1:"已下架",2:"已售出"})[s]||"未知",C=s=>s?`¥${s}`:"-",V=s=>{c.value=s},P=()=>{x("update:modelValue",!1),t.value=null,i.value=[]};return S(()=>_.modelValue,s=>{s&&D()}),(s,a)=>{const r=d("el-image"),T=d("el-empty"),A=d("el-tag"),y=d("el-switch"),B=d("el-dialog"),G=E("loading");return o(),h(B,{"model-value":f.modelValue,title:"商品详情",width:"750px",onClose:P},{default:w(()=>[z((o(),n("div",J,[t.value?(o(),n("div",L,[e("div",W,[e("div",H,[i.value.length>0?(o(),h(r,{key:0,src:i.value[c.value],fit:"contain","preview-src-list":i.value,"initial-index":c.value},null,8,["src","preview-src-list","initial-index"])):(o(),h(T,{key:1,description:"暂无图片","image-size":100}))]),i.value.length>1?(o(),n("div",K,[(o(!0),n(F,null,R(i.value,(N,g)=>(o(),n("div",{key:g,class:j(["thumbnail",{active:c.value===g}]),onClick:he=>V(g)},[m(r,{src:N,fit:"cover"},null,8,["src"])],10,Q))),128))])):u("",!0)]),e("div",U,[e("div",X,[e("h3",Y,l(t.value.item.title),1),e("div",Z,"ID: "+l(t.value.item.xyGoodId),1)]),e("div",ee,[e("span",te,l(C(t.value.item.soldPrice)),1),m(A,{type:I(t.value.item.status),size:"large"},{default:w(()=>[$(l(b(t.value.item.status)),1)]),_:1},8,["type"])]),t.value.item.detailInfo?(o(),n("div",se,[a[0]||(a[0]=e("div",{class:"description-title"},"商品描述",-1)),e("div",ae,l(t.value.item.detailInfo),1)])):u("",!0),e("div",oe,[e("div",ie,[a[1]||(a[1]=e("span",{class:"config-label"},"自动发货",-1)),e("div",le,[m(y,{"model-value":t.value.xianyuAutoDeliveryOn===1,disabled:""},null,8,["model-value"]),e("span",ne,l(t.value.xianyuAutoDeliveryOn===1?"已开启":"已关闭"),1)])]),e("div",ce,[a[2]||(a[2]=e("span",{class:"config-label"},"自动回复",-1)),e("div",de,[m(y,{"model-value":t.value.xianyuAutoReplyOn===1,disabled:""},null,8,["model-value"]),e("span",ue,l(t.value.xianyuAutoReplyOn===1?"已开启":"已关闭"),1)])])]),e("div",re,[t.value.item.createdTime?(o(),n("div",ve,[a[3]||(a[3]=e("span",{class:"time-label"},"创建时间：",-1)),e("span",me,l(t.value.item.createdTime),1)])):u("",!0),t.value.item.updatedTime?(o(),n("div",_e,[a[4]||(a[4]=e("span",{class:"time-label"},"更新时间：",-1)),e("span",pe,l(t.value.item.updatedTime),1)])):u("",!0)])])])):u("",!0)])),[[G,p.value]])]),_:1},8,["model-value"])}}}),we=q(ge,[["__scopeId","data-v-678b69df"]]);export{we as G};
